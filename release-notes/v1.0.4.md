# Release Notes — v1.0.4 (2025-11-21)

## Highlights
- **Edge caching for media**: `/images/*` now checks `caches.default` before hitting R2, writes back on miss, and returns proper cache headers/ETag. Range and conditional requests are forwarded to R2 so browsers can stream videos with `206 Partial Content`.
- **Warm recent assets**: the `update-cache` endpoint populates the edge cache with recent image/video objects so first views are fast. A scheduled cron calls the warmer automatically.
- **Submit page polish**: improved layout and paste handling (auto-fills Title: prefix, better caret positioning) and quick link to manage stories.

## Changes
- Added cache-aware media handler with byte-range support and canonical cache keys based on the worker origin.
- Warm job now writes warmed objects into `caches.default` instead of just touching R2.
- Exposed `CACHE_REFRESH_DAYS` and updated `UPDATE_CACHE_BASE` wiring for cache refresh calls.
- Submit page UX: title paste improvements and a manage link beside “Add Story”.

## Upgrade Notes
- Deploy the worker; no schema changes required.
- Ensure `CACHE_REFRESH_DAYS` (and optional `CACHE_REFRESH_TOKEN`) are set as desired.
- After deploy, you can trigger `GET /update-cache` (with token if configured) to pre-warm recent media into the edge cache.
